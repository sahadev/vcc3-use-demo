{"version":3,"file":"avatar.vue_vue_type_script_lang.mjs","sources":["../../../../../../packages/components/avatar/src/avatar.vue"],"sourcesContent":["<template>\n  <span :class=\"avatarClass\" :style=\"sizeStyle\">\n    <img\n      v-if=\"(src || srcSet) && !hasLoadError\"\n      :src=\"src\"\n      :alt=\"alt\"\n      :srcset=\"srcSet\"\n      :style=\"fitStyle\"\n      @error=\"handleError\"\n    />\n    <el-icon v-else-if=\"icon\">\n      <component :is=\"icon\" />\n    </el-icon>\n    <slot v-else></slot>\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, ref, watch } from 'vue'\nimport { ElIcon } from '@element-plus/components/icon'\nimport { avatarEmits, avatarProps } from './avatar'\n\nimport type { CSSProperties } from 'vue'\n\nexport default defineComponent({\n  name: 'ElAvatar',\n  components: {\n    ElIcon,\n  },\n  props: avatarProps,\n  emits: avatarEmits,\n\n  setup(props, { emit }) {\n    const hasLoadError = ref(false)\n\n    const avatarClass = computed(() => {\n      const { size, icon, shape } = props\n      const classList = ['el-avatar']\n      if (size && typeof size === 'string') classList.push(`el-avatar--${size}`)\n      if (icon) classList.push('el-avatar--icon')\n      if (shape) classList.push(`el-avatar--${shape}`)\n      return classList\n    })\n\n    const sizeStyle = computed<CSSProperties>(() => {\n      const { size } = props\n      return typeof size === 'number'\n        ? {\n            '--el-avatar-size': `${size}px`,\n          }\n        : {}\n    })\n\n    const fitStyle = computed<CSSProperties>(() => ({\n      objectFit: props.fit,\n    }))\n\n    // need reset hasLoadError to false if src changed\n    watch(\n      () => props.src,\n      () => (hasLoadError.value = false)\n    )\n\n    function handleError(e: Event) {\n      hasLoadError.value = true\n      emit('error', e)\n    }\n\n    return {\n      hasLoadError,\n      avatarClass,\n      sizeStyle,\n      fitStyle,\n      handleError,\n    }\n  },\n})\n</script>\n"],"names":[],"mappings":";;;;AAoBA,aAAe,eAAe,CAAC;;AAE/B,EAAE,UAAU,EAAE;;AAEd,GAAG;EACD,OAAO;EACP,KAAK,EAAE;OACF,CAAC;;IAEJ,MAAM;MACJ,MAAM,EAAE,IAAI,EAAE;;MAEd,IAAI,QAAQ,OAAO;QACjB,SAAS,CAAC,KAAK;;QAEf,SAAS,CAAC,IAAI;MAChB,IAAI,KAAK;QACP,SAAS,CAAC,IAAI,EAAE,WAAW;MAC7B,OAAO,SAAS,CAAC;MACjB,CAAC;UACG,SAAS,GAAG,QAAQ,CAAC,MAAM;MAC/B,QAAQ,IAAI,EAAE;;;OAGb,GAAG,EAAE,CAAC;MACP,CAAC;UACG,QAAQ,GAAG,QAAQ,CAAC;;;UAGpB;;;;KAIL;WACM;MACL;;eAES;MACT;MACA,WAAW;MACX;;;;;;"}