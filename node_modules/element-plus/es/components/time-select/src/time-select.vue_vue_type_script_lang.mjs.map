{"version":3,"file":"time-select.vue_vue_type_script_lang.mjs","sources":["../../../../../../packages/components/time-select/src/time-select.vue"],"sourcesContent":["<template>\n  <el-select\n    ref=\"select\"\n    :model-value=\"value\"\n    :disabled=\"disabled\"\n    :clearable=\"clearable\"\n    :clear-icon=\"clearIcon\"\n    :size=\"size\"\n    :placeholder=\"placeholder\"\n    default-first-option\n    :filterable=\"editable\"\n    @update:model-value=\"(event) => $emit('update:modelValue', event)\"\n    @change=\"(event) => $emit('change', event)\"\n    @blur=\"(event) => $emit('blur', event)\"\n    @focus=\"(event) => $emit('focus', event)\"\n  >\n    <el-option\n      v-for=\"item in items\"\n      :key=\"item.value\"\n      :label=\"item.value\"\n      :value=\"item.value\"\n      :disabled=\"item.disabled\"\n    />\n    <template #prefix>\n      <el-icon v-if=\"prefixIcon\" class=\"el-input__prefix-icon\">\n        <component :is=\"prefixIcon\" />\n      </el-icon>\n    </template>\n  </el-select>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, ref } from 'vue'\nimport ElSelect from '@element-plus/components/select'\nimport ElIcon from '@element-plus/components/icon'\nimport { CircleClose, Clock } from '@element-plus/icons-vue'\n\nimport type { PropType, Component } from 'vue'\nimport type { ComponentSize } from '@element-plus/utils/types'\n\nconst { Option: ElOption } = ElSelect\n\ninterface Time {\n  hours: number\n  minutes: number\n}\n\nconst parseTime = (time: string): null | Time => {\n  const values = (time || '').split(':')\n  if (values.length >= 2) {\n    const hours = parseInt(values[0], 10)\n    const minutes = parseInt(values[1], 10)\n    return {\n      hours,\n      minutes,\n    }\n  }\n  return null\n}\nconst compareTime = (time1: string, time2: string): number => {\n  const value1 = parseTime(time1)\n  const value2 = parseTime(time2)\n  const minutes1 = value1.minutes + value1.hours * 60\n  const minutes2 = value2.minutes + value2.hours * 60\n  if (minutes1 === minutes2) {\n    return 0\n  }\n  return minutes1 > minutes2 ? 1 : -1\n}\nconst formatTime = (time: Time): string => {\n  return `${time.hours < 10 ? `0${time.hours}` : time.hours}:${\n    time.minutes < 10 ? `0${time.minutes}` : time.minutes\n  }`\n}\nconst nextTime = (time: string, step: string): string => {\n  const timeValue = parseTime(time)\n  const stepValue = parseTime(step)\n  const next = {\n    hours: timeValue.hours,\n    minutes: timeValue.minutes,\n  }\n  next.minutes += stepValue.minutes\n  next.hours += stepValue.hours\n  next.hours += Math.floor(next.minutes / 60)\n  next.minutes = next.minutes % 60\n  return formatTime(next)\n}\n\nexport default defineComponent({\n  name: 'ElTimeSelect',\n  components: { ElSelect, ElOption, ElIcon },\n  model: {\n    prop: 'value',\n    event: 'change',\n  },\n  props: {\n    modelValue: String,\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    editable: {\n      type: Boolean,\n      default: true,\n    },\n    clearable: {\n      type: Boolean,\n      default: true,\n    },\n    size: {\n      type: String as PropType<ComponentSize>,\n      default: 'default',\n      validator: (value: string) =>\n        !value || ['large', 'default', 'small'].indexOf(value) !== -1,\n    },\n    placeholder: {\n      type: String,\n      default: '',\n    },\n    start: {\n      type: String,\n      default: '09:00',\n    },\n    end: {\n      type: String,\n      default: '18:00',\n    },\n    step: {\n      type: String,\n      default: '00:30',\n    },\n    minTime: {\n      type: String,\n      default: '',\n    },\n    maxTime: {\n      type: String,\n      default: '',\n    },\n    name: {\n      type: String,\n      default: '',\n    },\n    prefixIcon: {\n      type: [String, Object] as PropType<string | Component>,\n      default: Clock,\n    },\n    clearIcon: {\n      type: [String, Object] as PropType<string | Component>,\n      default: CircleClose,\n    },\n  },\n  emits: ['change', 'blur', 'focus', 'update:modelValue'],\n  setup(props) {\n    // computed\n    const select = ref(null)\n    const value = computed(() => props.modelValue)\n    const items = computed(() => {\n      const result = []\n      if (props.start && props.end && props.step) {\n        let current = props.start\n        while (compareTime(current, props.end) <= 0) {\n          result.push({\n            value: current,\n            disabled:\n              compareTime(current, props.minTime || '-1:-1') <= 0 ||\n              compareTime(current, props.maxTime || '100:100') >= 0,\n          })\n          current = nextTime(current, props.step)\n        }\n      }\n      return result\n    })\n    const blur = () => {\n      select.value?.blur?.()\n    }\n    const focus = () => {\n      select.value?.focus?.()\n    }\n\n    return {\n      select,\n      value,\n      items,\n      blur,\n      focus,\n    }\n  },\n})\n</script>\n"],"names":[],"mappings":";;;;;AAmCA,cAAc,EAAE,QAAQ,EAAE,WAAW,CAAC;;AAEtC,EAAE,MAAM,MAAM,GAAG,CAAC,IAAI,IAAI,EAAE,EAAE,MAAM,GAAG,EAAE;AACzC,EAAE,UAAU,OAAO,IAAI,CAAC,EAAE;;AAE1B,IAAI,MAAM,OAAO,GAAG,SAAS,MAAM,CAAC;;AAEpC,MAAM,KAAK;MACL,OAAO;KACR,CAAC;AACN;;AAEA,CAAC,CAAC;MACI,WAAW,GAAG,CAAC,KAAK,EAAE,KAAK,KAAK;EACpC,MAAM,MAAM,GAAG,SAAS;QAClB,MAAM,YAAY,CAAC,KAAK,CAAC,CAAC;QAC1B,QAAQ,SAAS,CAAC,OAAO,GAAG,MAAM;QAClC;MACF;WACK,CAAC,CAAC;;EAEX;EACA;AACF;AACA,EAAE,OAAO,CAAC,EAAE,IAAI,MAAM,GAAG,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;EAC1D;MACI,WAAW,CAAC,IAAI,EAAE,IAAI;EAC1B,MAAM,SAAS,GAAG,SAAS,CAAC,IAAI,EAAE;EAClC,MAAM,SAAS,GAAG,SAAS,CAAC,IAAI,EAAE;EAClC,MAAM,IAAI,GAAG;IACX,KAAK,EAAE;;GAER,CAAC;AACJ;AACA,EAAE,IAAI,CAAC,KAAK,cAAc,KAAK;EAC7B,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC;MACvC,CAAC,OAAO,GAAG,KAAK,OAAO,GAAG,EAAE,CAAC;EACjC;AACF;AACA,aAAe,eAAe;EAC5B,IAAI,EAAE,cAAc;EACpB,UAAU,EAAE,EAAE,QAAQ,EAAE,QAAQ;EAChC,OAAO;IACL,IAAI,SAAS;IACb,KAAK,EAAE,QAAQ;;EAEjB,KAAK,EAAE;IACL,UAAU,EAAE,MAAM;IAClB,UAAU;MACR,IAAI,EAAE,OAAO;MACb,OAAO,EAAE,KAAK;AACpB;;AAEA,UAAU,EAAE,OAAO;MACb,OAAO,EAAE,IAAI;KACd;IACD;MACE,IAAI,EAAE;MACN,OAAO,EAAE,IAAI;;IAEf;MACE,IAAI,EAAE,MAAM;MACZ;MACA,SAAS,EAAE,CAAC;;IAEd;MACE,IAAI,EAAE;MACN,OAAO,EAAE,EAAE;;IAEb;MACE,IAAI,EAAE;MACN,OAAO,EAAE;;IAEX;MACE,IAAI;MACJ,OAAO,EAAE,OAAO;;QAEd,EAAE;UACA,EAAE,MAAM;;KAEb;aACQ;MACP,IAAI,EAAE;;KAEP;aACQ;MACP,IAAI,EAAE,MAAM;;KAEb;QACG,EAAE;MACJ,IAAI,EAAE,MAAM;;KAEb;cACS,EAAE;MACV,IAAI,EAAE,CAAC,MAAM,EAAE;;KAEhB;aACQ,EAAE;MACT,IAAI,EAAE,CAAC;;KAER;;OAEE,EAAE,CAAC;;IAEN,MAAM;UACA,KAAK,GAAG;UACR,KAAK;;MAET,IAAI,MAAM;QACR,IAAI,OAAO,GAAG,KAAK,MAAM,CAAC;QAC1B,OAAO;;YAEH;YACA,UAAU,WAAW,CAAC,OAAO,EAAE,KAAK,QAAQ,IAAI;WACjD,CAAC,CAAC;;;OAGN;MACD,OAAO;KACR,EAAE;IACH,MAAM,IAAI,GAAG,MAAM;MACjB,IAAI,EAAE,EAAE,EAAE;MACV,CAAC,KAAK,CAAC,KAAK,MAAM,CAAC,KAAK;MACxB;UACI,KAAK,GAAG;UACR,EAAE,EAAE,EAAE,CAAC;SACR,GAAG,GAAG,GAAG,MAAM,CAAC,KAAK,SAAS,GAAG,KAAK,CAAC,GAAG,EAAE;;;YAGzC;;;UAGF;WACC;;;;;;;"}