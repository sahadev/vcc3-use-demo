{"version":3,"file":"switch.vue_vue_type_script_lang.js","sources":["../../../../../../packages/components/switch/src/switch.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"switchKls\"\n    role=\"switch\"\n    :aria-checked=\"checked\"\n    :aria-disabled=\"switchDisabled\"\n    @click.prevent=\"switchValue\"\n  >\n    <input\n      :id=\"id\"\n      ref=\"input\"\n      class=\"el-switch__input\"\n      type=\"checkbox\"\n      :name=\"name\"\n      :true-value=\"activeValue\"\n      :false-value=\"inactiveValue\"\n      :disabled=\"switchDisabled\"\n      @change=\"handleChange\"\n      @keydown.enter=\"switchValue\"\n    />\n    <span\n      v-if=\"!inlinePrompt && (inactiveIcon || inactiveText)\"\n      :class=\"[\n        'el-switch__label',\n        'el-switch__label--left',\n        !checked ? 'is-active' : '',\n      ]\"\n    >\n      <el-icon v-if=\"inactiveIcon\"><component :is=\"inactiveIcon\" /></el-icon>\n      <span v-if=\"!inactiveIcon && inactiveText\" :aria-hidden=\"checked\">{{\n        inactiveText\n      }}</span>\n    </span>\n    <span\n      ref=\"core\"\n      class=\"el-switch__core\"\n      :style=\"{ width: (width || 40) + 'px' }\"\n    >\n      <div v-if=\"inlinePrompt\" class=\"el-switch__inner\">\n        <template v-if=\"activeIcon || inactiveIcon\">\n          <el-icon\n            v-if=\"activeIcon\"\n            class=\"is-icon\"\n            :class=\"checked ? 'is-show' : 'is-hide'\"\n          >\n            <component :is=\"activeIcon\" />\n          </el-icon>\n          <el-icon\n            v-if=\"inactiveIcon\"\n            class=\"is-icon\"\n            :class=\"!checked ? 'is-show' : 'is-hide'\"\n          >\n            <component :is=\"inactiveIcon\" />\n          </el-icon>\n        </template>\n        <template v-else-if=\"activeText || inactiveIcon\">\n          <span\n            v-if=\"activeText\"\n            class=\"is-text\"\n            :class=\"checked ? 'is-show' : 'is-hide'\"\n            :aria-hidden=\"!checked\"\n          >\n            {{ activeText.substr(0, 1) }}\n          </span>\n          <span\n            v-if=\"inactiveText\"\n            class=\"is-text\"\n            :class=\"!checked ? 'is-show' : 'is-hide'\"\n            :aria-hidden=\"checked\"\n          >\n            {{ inactiveText.substr(0, 1) }}\n          </span>\n        </template>\n      </div>\n      <div class=\"el-switch__action\">\n        <el-icon v-if=\"loading\" class=\"is-loading\"><loading /></el-icon>\n      </div>\n    </span>\n    <span\n      v-if=\"!inlinePrompt && (activeIcon || activeText)\"\n      :class=\"[\n        'el-switch__label',\n        'el-switch__label--right',\n        checked ? 'is-active' : '',\n      ]\"\n    >\n      <el-icon v-if=\"activeIcon\"><component :is=\"activeIcon\" /></el-icon>\n      <span v-if=\"!activeIcon && activeText\" :aria-hidden=\"!checked\">{{\n        activeText\n      }}</span>\n    </span>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, onMounted, ref, nextTick, watch } from 'vue'\nimport { isPromise } from '@vue/shared'\nimport { isBool } from '@element-plus/utils/util'\nimport { throwError, debugWarn } from '@element-plus/utils/error'\nimport ElIcon from '@element-plus/components/icon'\nimport { Loading } from '@element-plus/icons-vue'\nimport {\n  UPDATE_MODEL_EVENT,\n  CHANGE_EVENT,\n  INPUT_EVENT,\n} from '@element-plus/utils/constants'\nimport { useDisabled, useFormItem, useSize } from '@element-plus/hooks'\nimport { switchProps, switchEmits } from './switch'\n\nconst COMPONENT_NAME = 'ElSwitch'\n\nexport default defineComponent({\n  name: COMPONENT_NAME,\n  components: { ElIcon, Loading },\n\n  props: switchProps,\n  emits: switchEmits,\n\n  setup(props, { emit }) {\n    const { formItem } = useFormItem()\n    const switchDisabled = useDisabled(computed(() => props.loading))\n\n    const switchSize = useSize()\n    const isModelValue = ref(props.modelValue !== false)\n    const input = ref<HTMLInputElement>()\n    const core = ref<HTMLSpanElement>()\n\n    const prefix = 'el-switch'\n    const switchKls = computed(() => [\n      prefix,\n      `${prefix}--${switchSize.value}`,\n      switchDisabled.value ? 'is-disabled' : '',\n      checked.value ? 'is-checked' : '',\n    ])\n\n    watch(\n      () => props.modelValue,\n      () => {\n        isModelValue.value = true\n      }\n    )\n\n    watch(\n      () => props.value,\n      () => {\n        isModelValue.value = false\n      }\n    )\n\n    const actualValue = computed(() => {\n      return isModelValue.value ? props.modelValue : props.value\n    })\n\n    const checked = computed(() => actualValue.value === props.activeValue)\n\n    if (![props.activeValue, props.inactiveValue].includes(actualValue.value)) {\n      emit(UPDATE_MODEL_EVENT, props.inactiveValue)\n      emit(CHANGE_EVENT, props.inactiveValue)\n      emit(INPUT_EVENT, props.inactiveValue)\n    }\n\n    watch(checked, () => {\n      input.value!.checked = checked.value\n\n      if (props.activeColor || props.inactiveColor) {\n        setBackgroundColor()\n      }\n\n      if (props.validateEvent) {\n        formItem?.validate?.('change')\n      }\n    })\n\n    const handleChange = (): void => {\n      const val = checked.value ? props.inactiveValue : props.activeValue\n      emit(UPDATE_MODEL_EVENT, val)\n      emit(CHANGE_EVENT, val)\n      emit(INPUT_EVENT, val)\n      nextTick(() => {\n        input.value!.checked = checked.value\n      })\n    }\n\n    const switchValue = (): void => {\n      if (switchDisabled.value) return\n\n      const { beforeChange } = props\n      if (!beforeChange) {\n        handleChange()\n        return\n      }\n\n      const shouldChange = beforeChange()\n\n      const isExpectType = [isPromise(shouldChange), isBool(shouldChange)].some(\n        (i) => i\n      )\n      if (!isExpectType) {\n        throwError(\n          COMPONENT_NAME,\n          'beforeChange must return type `Promise<boolean>` or `boolean`'\n        )\n      }\n\n      if (isPromise(shouldChange)) {\n        shouldChange\n          .then((result) => {\n            if (result) {\n              handleChange()\n            }\n          })\n          .catch((e) => {\n            debugWarn(COMPONENT_NAME, `some error occurred: ${e}`)\n          })\n      } else if (shouldChange) {\n        handleChange()\n      }\n    }\n\n    const setBackgroundColor = (): void => {\n      const newColor = checked.value ? props.activeColor : props.inactiveColor\n      const coreEl = core.value\n      if (props.borderColor) coreEl!.style.borderColor = props.borderColor\n      else if (!props.borderColor) coreEl!.style.borderColor = newColor\n      coreEl!.style.backgroundColor = newColor\n      ;(coreEl!.children[0] as HTMLDivElement).style.color = newColor\n    }\n\n    const focus = (): void => {\n      input.value?.focus?.()\n    }\n\n    onMounted(() => {\n      if (props.activeColor || props.inactiveColor || props.borderColor) {\n        setBackgroundColor()\n      }\n\n      input.value!.checked = checked.value\n    })\n\n    return {\n      input,\n      core,\n      switchDisabled,\n      checked,\n      switchKls,\n      handleChange,\n      switchValue,\n      focus,\n    }\n  },\n})\n</script>\n"],"names":["switchProps","switchEmits","ref","watch","computed","UPDATE_MODEL_EVENT","CHANGE_EVENT","INPUT_EVENT","nextTick","isPromise"],"mappings":";;;;;;;;;;;;;;;;AA2GA,oBAAoB,GAAG,WAAW;;AAElC,EAAE,IAAI,EAAE;;AAER,EAAE,KAAK,EAAEA,mBAAW;EAClB,OAAOC,mBAAW;EAClB,KAAK,CAAC,SAAS,IAAI,IAAI;;IAErB,MAAM;IACN,MAAM,UAAU;;IAEhB,MAAM,KAAK,GAAGC,SAAK;IACnB,MAAM,IAAI,GAAGA,UAAM;IACnB,MAAM,MAAM,GAAG,WAAW,CAAC;;MAEzB,MAAM;MACN,CAAC,QAAQ,CAAC,EAAE,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC;MAChC,cAAc,CAAC,KAAK,GAAG;MACvB,OAAO,MAAM,GAAG,YAAY,GAAG;;IAEjCC,UAAM,WAAW,CAAC;MAChB,YAAY,MAAM,GAAG,IAAI,CAAC;MAC1B,CAAC;aACE,CAAC,MAAM,KAAK,CAAC,KAAK,EAAE,MAAM;MAC7B,YAAY,CAAC,KAAK,GAAG,KAAK,CAAC;MAC3B,CAAC;IACH;;KAEC,CAAC,CAAC;UACG,OAAO,GAAGC,YAAQ;SACnB,CAAC;UACA,CAACC,4BAAkB,EAAE;MACzB;;;IAGFF,SAAK;MACH,IAAI,EAAE,CAAC;MACP,MAAM;UACF,KAAK,CAAC,WAAW,IAAI;;;;QAIvB,GAAG,GAAG,QAAQ,IAAI,IAAI,GAAG,MAAM;OAChC;KACF;;MAEC,MAAM,GAAG,GAAG,OAAO,CAAC,aAAa,CAAC,aAAa,QAAQ,CAAC,WAAW,CAAC;;UAEhE,CAACG,sBAAY,EAAE,IAAI,CAAC;MACxB,IAAI,CAACC,qBAAW,EAAE,GAAG,CAAC,CAAC;MACvBC,YAAQ,CAAC,MAAM;QACb,KAAK,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC,KAAK;;;IAGvC,MAAM;MACJ,IAAI,cAAc,CAAC,KAAK;;MAExB,MAAM,EAAE,YAAY,EAAE,GAAG,KAAK,CAAC;UAC3B,CAAC,YAAY,EAAE;;;OAGlB;YACK,YAAY,GAAG;MACrB;;;OAGC;MACD,IAAIC,gBAAS,CAAC,YAAY,GAAG;QAC3B,YAAY,CAAC,IAAI,CAAC,CAAC,MAAM;UACvB,IAAI,MAAM,EAAE;YACV,YAAY,EAAE,CAAC;WAChB;SACF,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK;;;;QAIhB,YAAY,EAAE;OACf;;UAEG,qBAAqB;MACzB,MAAM,QAAQ,GAAG;YACX,MAAM,GAAG;UACX;;;QAGF,MAAM,CAAC,KAAK,CAAC,WAAW,GAAG;;MAE7B,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,GAAG,QAAQ,CAAC;;;MAG1C,IAAI,EAAE,EAAE,EAAE,CAAC;SACR,GAAG,CAAC,EAAE,GAAG;;iBAEL,CAAC,MAAM;;;;MAId,KAAK,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO;;WAExB;;;;;eAKI;kBACG;;MAEZ,KAAK;;;;;;;"}